#!/bin/sh

while inotifywait -qqr /sys/class/power_supply/*/; do
    percent=$(cat /sys/class/power_supply/BAT1/capacity)

    if [ "${percent}" -ge 90 ]; then
        icon=""
        percent=
    elif [ "${percent}" -ge 75 ]; then
        icon=""
    elif [ "${percent}" -ge 50 ]; then
        icon=""
    elif [ "${percent}" -ge 15 ]; then
        icon=""
    else
        icon=""
    fi

    status=$(cat /sys/class/power_supply/ACAD/online)

    case "${status}" in
        1)
            icon=""
            ;;
    esac

    percent="${percent:+$percent%}"

    printf '%s%s\n' "${icon}" "${percent:+ $percent}"
done

