# kak: filetype=ini

[settings]
    screenchange-reload = true

[defaults]
    width = 100%
    height = 32
    fixed-center = true

    background = #ff2f343f
    foreground = #ffffff

    margin-top = 32

    line-size = 4

    wm-restack = bspwm

    font-0 = "forkawesome:style=regular:size=11;2"
    font-1 = "forkawesome:style=solid:size=11;2"
    font-2 = "sans-serif:style=regular:size=11;3"
    font-3 = "sans-serif:style=bold:size=11;3"
    font-4 = "sans-serif:style=black:size=11;3"
    font-5 = "monospace:style=regular:size=11;3"
    font-6 = "monospace:style=bold:size=11;3"
    font-7 = "emoji:style=regular:scale=5;4"
    font-8 = "Noto Sans CJK JP:style=regular:size=10;2"

[bar/primary]
    inherit = defaults

    modules-left = bspwm title
    modules-right = player events articles mail updates power

    tray-detatched = false
    tray-position = right
    tray-padding = 4
    tray-maxsize = 16

[bar/secondary]
    inherit = defaults
    monitor = ${env:POLYBAR_MONITOR:}

    modules-left = bspwm title

[module/updates]
    type        = custom/script
    exec        = polybar-updates
    tail        = true

    click-left  = terminal yay -Su &

[module/power]
    type        = custom/script
    exec        = power -f
    tail        = true
    format-padding  = 4

[module/bspwm]
    type = internal/bspwm
    enable-scroll = true

    ws-icon-0 = 1;
    ws-icon-1 = 2;
    ws-icon-2 = 3;
    ws-icon-3 = 4;
    ws-icon-4 = 5;

    format = <label-state>

    label-focused = "%name%"
    label-occupied = "%name%"
    label-urgent = "%name%"
    label-empty = "%name%"
    label-focused-padding = 2
    label-occupied-padding = 2
    label-urgent-padding = 2
    label-empty-padding = 2

    label-focused-background = #4084d6
    label-urgent-background = #cf4342

[module/events]
    type            = custom/script
    exec            = polybar-events --notstarted -a Calendar -a University -a "Violet & Kylie" -a "Google Calendar (kylie@somas.is)" -a "Jonesers" -a "Holidays - North Carolina" | sed 's/ - .*//' | ellipsis 45
    click-left      = raise '^ikhal$' terminal tkhal &
    format-padding  = 4

    interval        = 50

[module/player]
    type            = custom/script
    exec            = polybar-player | ellipsis 60
    click-left      = mpc toggle
    click-middle    = mpc stop
    click-right     = mpc next
    enable-scroll   = true
    scroll-up       = mpc volume +5
    scroll-down     = mpc volume -5

    format-padding = 4

    tail            = true

[module/articles]
    type            = custom/script
    exec            = polybar-articles
    click-left      = raise '^newsboat$' terminal newsboat &
    tail            = true
    format-padding  = 4

[module/mail]
    type            = custom/script
    exec            = polybar-mail
    click-left      = raise '^aerc$' aerc &
    format-padding  = 4

    # FIXME: this interval shouldn't be needed, does `polybar-mail` not react properly?
    tail            = true
    interval        = 900

[module/title]
    type            = custom/script
    exec            = xtitle -is -t 90
    click-right     = bspc node -c
    enable-scroll   = true
    scroll-down     = bspc node -f next.local.!hidden.window
    scroll-up       = bspc node -f prev.local.!hidden.window

    tail            = true

    label-font      = 5
    label-padding   = 4
    label-foreground = #ffffff
    label-background = #4084d6
