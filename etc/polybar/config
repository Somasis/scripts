# kak: filetype=ini

[settings]
    screenchange-reload = true

[defaults]
    width = 100%
    height = 32
    fixed-center = true

    background = #2f343f
    foreground = #ffffff

    margin-top = 32

    line-size = 4

    wm-restack = bspwm

    font-0 = "sans-serif:style=regular:size=11;3"
    font-1 = "sans-serif:style=bold:size=11;3"
    font-2 = "monospace:style=regular:size=11;3"
    font-3 = "monospace:style=bold:size=11;3"
    font-4 = "emoji:style=regular:scale=5;3"
    font-5 = "Noto Sans CJK JP:style=regular:size=10;2"
    font-6 = "siji:style=regular:pixelsize=19;3"

[bar/primary]
    inherit = defaults

    modules-left = bspwm title
    modules-center = clock
    modules-right = player events articles mail updates network power

    tray-detatched = false
    tray-position = right
    tray-padding = 4
    tray-maxsize = 16

[bar/secondary]
    inherit = defaults
    monitor = ${env:POLYBAR_MONITOR:}

    modules-left = bspwm title

[module/bspwm]
    type = internal/bspwm
    enable-scroll = true

    ws-icon-0 = 1;
    ws-icon-1 = 2;
    ws-icon-2 = 3;
    ws-icon-3 = 4;
    ws-icon-4 = 5;

    format = <label-state><label-mode>

    label-focused-background    = #5294e2
    label-urgent-background     = #cf4342
    label-mode-font             = 6
    label-monocle               = 
    label-tiled                 = 
    label-fullscreen            = 
    label-floating              = 
    label-locked                = 
    label-sticky                = 
    label-private               = 
    label-focused               = "%name%"
    label-occupied              = "%name%"
    label-urgent                = "%name%"
    label-empty                 = "%name%"
    label-focused-padding       = 1
    label-occupied-padding      = 1
    label-urgent-padding        = 1
    label-empty-padding         = 1

[module/title]
    type             = custom/script
    exec             = xtitle -is -t 90
    click-right      = bspc node -c
    enable-scroll    = true
    scroll-down      = bspc node -f next.local.!hidden.window
    scroll-up        = bspc node -f prev.local.!hidden.window

    tail             = true

    label-padding    = 1
    label-foreground = #ffffff
    label-background = #5294e2

[module/clock]
    type            = custom/script
    exec            = polybar-clock
    click-left      = raise '^ikhal$' terminal tkhal &
    format-padding  = 1
    interval        = 59

[module/player]
    type            = custom/script
    exec            = polybar-player | ellipsis 50
    tail            = true

    click-left      = mpc toggle
    click-middle    = mpc stop
    click-right     = mpc next
    enable-scroll   = true
    scroll-up       = mpc volume +5
    scroll-down     = mpc volume -5

    format-padding  = 1

[module/events]
    type            = custom/script
    exec            = polybar-events --notstarted -a Calendar -a University -a "Violet & Kylie" -a "Google Calendar (kylie@somas.is)" -a "Jonesers" -a "Holidays - North Carolina" | sed 's/ - .*//' | ellipsis 40
    click-left      = raise '^ikhal$' terminal tkhal &
    format-padding  = 1

    interval        = 50

[module/articles]
    type            = custom/script
    exec            = polybar-articles
    click-left      = raise '^newsboat$' terminal newsboat &
    tail            = true
    format-padding  = 1

[module/mail]
    type            = custom/script
    exec            = polybar-mail
    click-left      = raise '^aerc$' aerc &
    format-padding  = 1

    # FIXME: this interval shouldn't be needed, does `polybar-mail` not react properly?
    tail     = true
    interval = 900

[module/updates]
    type        = custom/script
    exec        = polybar-updates
    tail        = true

    click-left  = terminal yay -Su &

[module/network]
    type        = internal/network
    interface   = wlp2s0

    ramp-signal-0 = 
    ramp-signal-1 = 
    ramp-signal-2 = 
    ramp-signal-3 = 
    ramp-signal-4 = 
    ramp-signal-5 = 

    format-padding = 1
    format-connected = <ramp-signal>
    format-disconnected = 

[module/power]
    type            = custom/script
    exec            = power -f -A "" -0 "" -1 "" -2 "" -3 "" -4 ""
    tail            = true
    format-padding  = 1

