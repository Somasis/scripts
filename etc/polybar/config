# kak: filetype=ini

[settings]
    screenchange-reload = true

[bar/default]
    dpi                 = ${xrdb:Xft.dpi:96}

    width               = 100%
    height              = 64
    fixed-center        = true

    background          = #ff2f343f
    foreground          = #ffffff

    module-margin-left  = 8
    margin-top          = 64

    line-size           = 4

    wm-restack          = bspwm

    modules-left        = bspwm title
    ; modules-center      = clock
    modules-right       = player events articles mail updates power

    font-0              = "forkawesome:style=regular:size=11;2"
    font-1              = "forkawesome:style=solid:size=11;2"
    font-2              = "sans-serif:style=regular:size=11;4"
    font-3              = "sans-serif:style=bold:size=11;4"
    font-4              = "sans-serif:style=black:size=11;4"
    font-5              = "monospace:style=regular:size=11;4"
    font-6              = "monospace:style=bold:size=11;4"
    font-7              = "emoji:style=regular:scale=5;5"
    font-8              = "Noto Sans CJK JP:style=regular:size=10;4"

    tray-detatched      = false
    tray-position       = right
    tray-padding        = 4
    tray-maxsize        = 32

[module/updates]
    type        = custom/script
    exec        = polybar-updates
    tail        = true

    click-left  = terminal yay -Su &

[module/power]
    type        = custom/script
    exec        = polybar-power
    tail        = true

[module/bspwm]
    type = internal/bspwm
    enable-scroll = true

    ws-icon-0 = "1"
    ws-icon-1 = "2"
    ws-icon-2 = "3"
    ws-icon-3 = "4"
    ws-icon-4 = "5"

    format = "<label-state> <label-mode> "

    label-monocle = 
    label-tiled = t
    label-fullscreen = 
    label-floating = 
    label-pseudotiled = t
    label-locked = 
    label-sticky = 
    label-private = 
    label-locked-foreground = #654ea7
    label-sticky-foreground = #654ea7
    label-private-foreground = #654ea7
    label-focused-foreground = #ffffff
    label-focused-background = #4084d6

[module/clock]
    type = custom/script
    tail = true
    exec = polybar-clock
    click-left = raise '^ikhal$' terminal tkhal &

    format = <label>
    label = %output%
    label-font = 5

[module/events]
    type            = custom/script
    exec            = polybar-events --notstarted -a Calendar -a University -a "Violet & Kylie" -a "Google Calendar (kylie@somas.is)" -a "Jonesers" -a "Holidays - North Carolina" | sed 's/ - .*//' | ellipsis 45
    click-left      = raise '^ikhal$' terminal tkhal &

    interval        = 50

[module/player]
    type            = custom/script
    exec            = polybar-player | ellipsis 60
    click-left      = mpc toggle
    click-middle    = mpc stop
    click-right     = mpc next
    enable-scroll   = true
    scroll-up       = mpc volume +5
    scroll-down     = mpc volume -5

    tail            = true

[module/articles]
    type            = custom/script
    exec            = polybar-articles
    click-left      = raise '^newsboat$' terminal newsboat &

    tail            = true

[module/mail]
    type            = custom/script
    exec            = polybar-mail
    click-left      = raise '^aerc$' aerc &

    # FIXME: this interval shouldn't be needed, does `polybar-mail-count` not react properly?
    tail            = true
    interval        = 900

[module/title]
    type            = custom/script
    exec            = xtitle -is -t 90
    click-right     = bspc node -c
    enable-scroll   = true
    scroll-down     = bspc node -f next.local.!hidden.window
    scroll-up       = bspc node -f prev.local.!hidden.window

    tail            = true

    label-font      = 5
    label-padding   = 4
    label-foreground = #ffffff
    label-background = #4084d6
