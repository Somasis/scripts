# don't allow 256-color palettes, as I don't like how dark some of the colors are.
set-option -g default-terminal  "screen-16color"

# match `catgirl`'s status style
set-option -g status            on
set-option -g status-position   top

set-option -g status-justify    left
set-option -g status-left       ""
set-option -g status-right      ""
set-option -g status-interval   5

set-option -g window-status-format          " #I #W "
set-option -g window-status-current-format  " #I #W "
set-option -g window-status-separator       ""

# default styles. `catgirls` will set per-window styles.
set-option -g status-style                  "bg=terminal,fg=terminal"
set-option -g status-left-style             "fg=magenta"
set-option -g status-right-style            "fg=magenta"
set-option -g window-status-style           "bg=terminal,fg=terminal"
set-option -g window-status-current-style   ""
set-option -g window-status-activity-style  "bold"
set-option -g exit-empty                    on

# ignore bells, only check for activity.
# notifications from highlights are handled by `catgirl-notify`.
set-option -g monitor-activity  on
set-option -g visual-activity   off
set-option -g monitor-bell      off
set-option -g visual-bell       off

set-option -g renumber-windows  on

# disable scrollback. `catgirl` has its own.
set-option -g mouse             on
set-option -g history-limit     0
unbind-key -T root MouseDown3Pane           # Right click menu is not useful since scrollback is off.

## tmux // Prefix // control + ]
set-option -g prefix            'C-]'       # C-b is used for text formatting.

unbind-key -T prefix C-z                    # Used by `catgirl` for formatting.
## Text editing // Move to word left of cursor // meta + b control + left
## Text editing // Move to word right of cursor // meta + f, control + right
## Text editing // Delete word to left of cursor // control + w, control + h, control + backspace
## Text editing // Delete word to right of cursor // meta + d, control + delete
## Text editing // Toggle bold // control + z + b, meta + b
## Text editing // Toggle italics // control + z + i, meta + i
## Text editing // Toggle underline // control + z + u, meta + u
bind-key -n C-Left          send-keys M-b
bind-key -n C-Right         send-keys M-f
bind-key -n C-h             send-keys C-w
bind-key -n C-Delete        send-keys M-d
bind-key -n M-b             send-keys C-z b
bind-key -n M-i             send-keys C-z i
bind-key -n M-u             send-keys C-z u

# add buffer scrolling via mouse. (by two lines)
bind-key -n WheelUpPane     send-keys Up Up
bind-key -n WheelDownPane   send-keys Down Down

## Windows // Switch to window [number] // control + [0-9]
bind-key -n C-0     select-window -t 0
bind-key -n C-1     select-window -t 1
bind-key -n C-2     select-window -t 2
bind-key -n C-4     select-window -t 4
bind-key -n C-5     select-window -t 5
bind-key -n C-6     select-window -t 6
bind-key -n C-7     select-window -t 7
bind-key -n C-8     select-window -t 8
bind-key -n C-9     select-window -t 9

## Windows // Cycle through server windows // meta + tab
set-option -gw      xterm-keys on
bind-key -n M-Tab   next-window

## Windows // Move to {previous,next} channel window // meta + left, meta + right
bind-key -n M-Left  send-keys C-p
bind-key -n M-Right send-keys C-n

## Commands // Execute /names // control + l
bind-key -n C-l     {
    send-keys       C-e C-u
    send-keys -l    "/names"
    send-keys       Enter
    send-keys       C-y
}

## Commands // Execute /open // control + o
bind-key -n C-o     {
    send-keys       C-e C-u
    send-keys -l    "/open"
    send-keys       Enter
    send-keys       C-y
}

## State // Restart server instance // control + r
bind-key -n C-r     respawn-window

## State // Disconnect from server // control + w
bind-key -n C-w     {
    send-keys       C-e C-u
    send-keys -l    "/quit"
    send-keys       Enter
}

## tmux // Source configuration // prefix + r
bind-key r          source-file ~/.config/catgirls/tmux.conf

## State // Detatch // control + q
bind-key -n C-q     detach-client
set-hook -g client-detached 'run-shell { catgirls -k }'

## State // Quit all servers // control + meta + q
bind-key -n C-M-q     kill-session -t catgirls

